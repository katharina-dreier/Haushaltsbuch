<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.AreaChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ChoiceBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.ToolBar?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>

<BorderPane xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.meinprojekt.haushalt.ui.MainController">

    <!-- Oben: Toolbar -->
    <top>
        <ToolBar styleClass="toolbar">
            <Button fx:id="btnNeuesKonto" onAction="#handleNeuesKonto" text="Neues Konto" />
            <Button fx:id="btnNeueEinnahme" onAction="#handleNeueEinnahme" text="Neue Einnahme" />
            <Button fx:id="btnNeueAusgabe" onAction="#handleNeueAusgabe" text="Neue Ausgabe" />
            <Button fx:id="btnNeueUmbuchung" onAction="#handleNeueUmbuchung" text="Neue Umbuchung" />
        </ToolBar>
    </top>

    <!-- Mitte: Links Konten+Buchungen, Rechts Diagramme -->
    <center>
        <SplitPane fx:id="split" dividerPositions="0.5"> 

            <!-- Linke Seite: Konten + Buchungen untereinander -->
            <VBox spacing="10">

                <!-- Karte: Konten -->
                <VBox fx:id="kontenArea" spacing="8" styleClass="card">
                    <Label styleClass="card-title" text="Konten" />
                    <TableView fx:id="tblKonten">
                        <columns>
                            <TableColumn fx:id="colKontonummer" prefWidth="120" text="Kontonummer" />
                            <TableColumn fx:id="colKontoName" prefWidth="150" text="Name" />
                            <TableColumn fx:id="colInstitut" prefWidth="140" text="Kreditinstitut" />
                             <TableColumn fx:id="colKontostand" prefWidth="100" text="Kontostand" />
                        </columns>
                    </TableView>
                    <Label fx:id="summeAlleKontenLbl" style="-fx-padding: 4 0 0 0;" text="Summe: 0,00 €" />
                </VBox>

				
                <!-- Karte: Buchungen -->
                <VBox fx:id="buchungenArea" spacing="8" styleClass="card">
                 <Label styleClass="card-title" text="Buchungen" />
                 <VBox spacing="0">
                    <TabPane fx:id="tabPane" minHeight="28.0" prefHeight="28.0" styleClass="filter-tabs">
                        <tabs>
                            <Tab fx:id="tabGesamt" text="Gesamt" />
                            <Tab fx:id="tabEinnahmen" text="Einnahmen" />
                            <Tab fx:id="tabAusgaben" text="Ausgaben" />
                            <Tab fx:id="tabUmbuchungen" text="Umbuchungen" />
                        </tabs>
                    </TabPane>

                    <TableView fx:id="tblBuchungen" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colBuchungsDatum" prefWidth="150" text="Buchungsdatum" />
                            <TableColumn fx:id="colKategorie" prefWidth="150" text="Kategorie" />
                            <TableColumn fx:id="colEmpfaenger" prefWidth="120" text="Empfänger" />
                            <TableColumn fx:id="colSender" prefWidth="120" text="Sender" />
                            <TableColumn fx:id="colBetrag" prefWidth="100" text="Betrag" />
                            <TableColumn fx:id="colKonto" prefWidth="150" text="Konto" />
                        </columns>
                    </TableView>
					</VBox>
                    <Label fx:id="summeBuchungenLbl" style="-fx-padding: 4 0 0 0;" text="Summe: 0,00 €" />
                </VBox>
 				</VBox>
            

            <!-- Rechte Seite: Diagramme -->
           <VBox fx:id="statistikArea" alignment="TOP_CENTER" spacing="10" styleClass="card" VBox.vgrow="ALWAYS">
   					 <Label styleClass="card-title" text="Diagramme" />
    				<HBox fx:id="diagrammLegende" alignment="CENTER" spacing="60" styleClass="chart-header">

    					<children>

        					<!-- Block 1: Einnahmen -->
        					<VBox alignment="CENTER_LEFT" spacing="2">
           					 <children>
                				<HBox alignment="BASELINE_LEFT" spacing="10">
                    		<children>
                        		<Circle radius="5" styleClass="legend-dot-einnahmen" />
                       			 <Label styleClass="chart-header" text="Einnahmen" />
                    </children>
                </HBox>
                <Label fx:id="legendeEinnahmenlbl" styleClass="chart-header-sum" text="Summe: 0,00 €" />
            </children>
        </VBox>

        <!-- Block 2: Ausgaben -->
        <VBox alignment="CENTER_LEFT" spacing="2">
            <children>
                <HBox alignment="BASELINE_LEFT" spacing="10">
                    <children>
                        <Circle radius="5" styleClass="legend-dot-ausgaben" />
                        <Label styleClass="chart-header" text="Ausgaben" />
                    </children>
                </HBox>
                <Label fx:id="legendeAusgabenlbl" styleClass="chart-header-sum" text="Summe: 0,00 €" />
            </children>
        </VBox>

        <!-- Block 3: Differenz -->
        <VBox alignment="CENTER_LEFT" spacing="2">
            <children>
                <HBox alignment="BASELINE_LEFT" spacing="5">
                    <children>
                        <Label styleClass="chart-header" text="Differenz" />
                    </children>
                </HBox>
                <Label fx:id="legendeDifferenzlbl" styleClass="chart-header-sum" text="Summe: 0,00 €" />
            </children>
        </VBox>

    </children>
</HBox>

    				<AreaChart fx:id="einnahmenAusgabenDiagramm" VBox.vgrow="ALWAYS">
       					<xAxis>
           					 <CategoryAxis fx:id="xAchseEinnahmenAusgabenDiagramm" />
       					</xAxis>
       					<yAxis>
           					 <NumberAxis fx:id="yAchseEinnahmenAusgabenDiagramm" />
       					</yAxis>
       					</AreaChart>
			</VBox>


        </SplitPane>
    </center>

  
    <bottom>
        
    </bottom>
  <bottom>
    <HBox BorderPane.alignment="CENTER"
          spacing="8"
          styleClass="filter-bar"
          alignment="CENTER">
	
        <children>
        <Label styleClass="card-title" text="Diagramme" />
            <Label text="Zeitraum:" styleClass="filter-label"/>

            <ChoiceBox fx:id="auswahlBox"
                       prefWidth="160.0"
                       />

            <Label text="von:" fx:id="lblVon" styleClass="filter-label"/>
            <DatePicker fx:id="startDatumPicker"/>

            <Label text="bis:" fx:id="lblBis" styleClass="filter-label"/>
            <DatePicker fx:id="endDatumPicker"/>
            
          
            <Button fx:id="btnAuswahlAnwenden"
                    text="Auswahl anwenden"
                    onAction="#handleAuswahlAnwenden"
                    mnemonicParsing="false"
                    styleClass="primary-button"/>
        </children>
    </HBox>
</bottom>

</BorderPane>
